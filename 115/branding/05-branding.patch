# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Date 1699465823 -3600
# Parent  41bab0371f94bb4b5d4503bc19bb8cb04cc3de92
Branding 5: Installer and other places where we prefer betterbird.exe.
* * *
Branding 5: More branding.
* * *
Branding 5a: Fix Linux build.
* * *
Fix Linux .tar.bz name
* * *
Fix publisher in uninstaller.
* * *
Branding: Additional makefile changes for Mac.
* * *
Branding: Fix build instructions link.

diff --git a/mail/app/Makefile.in b/mail/app/Makefile.in
--- a/mail/app/Makefile.in
+++ b/mail/app/Makefile.in
@@ -27,21 +27,22 @@ ifdef MOZ_LINUX_32_SSE2_STARTUP_ERROR
 CXX := $(filter-out -march=% -msse -msse2 -mfpmath=sse,$(CXX))
 CXX += -march=pentiumpro
 endif
 
 objdir = $(topobjdir)/comm/mail/app
 
 include $(topsrcdir)/config/rules.mk
 
+BINARY = betterbird
 ifneq ($(OS_ARCH),WINNT)
 ifdef COMPILE_ENVIRONMENT
 ifndef MOZ_NO_PIE_COMPAT
 libs::
-	cp -p $(DIST)/bin/$(MOZ_APP_NAME)$(BIN_SUFFIX) $(DIST)/bin/$(MOZ_APP_NAME)-bin$(BIN_SUFFIX)
+	cp -p $(DIST)/bin/$(BINARY)$(BIN_SUFFIX) $(DIST)/bin/$(BINARY)-bin$(BIN_SUFFIX)
 endif
 endif
 
 GARBAGE += $(addprefix $(DIST)/bin/defaults/pref/, all.js all-thunderbird.js mailnews.js)
 endif # ! WinNT
 
 ifeq (gtk,$(MOZ_WIDGET_TOOLKIT))
 ICON_SUFFIX=.png
@@ -107,34 +108,34 @@ endif
 LPROJ := Contents/Resources/$(LPROJ_ROOT).lproj
 
 clean clobber repackage::
 	$(RM) -r '$(dist_dest)'
 
 MAC_BUNDLE_VERSION = $(shell $(PYTHON3) $(srcdir)/macversion.py --version=$(MOZ_APP_VERSION) --buildid=$(DEPTH)/buildid.h)
 
 .PHONY: repackage
-tools repackage:: $(DIST)/bin/$(MOZ_APP_NAME) $(objdir)/macbuild/Contents/MacOS-files.txt
+tools repackage:: $(DIST)/bin/$(BINARY) $(objdir)/macbuild/Contents/MacOS-files.txt
 	rm -rf $(dist_dest)
 	$(MKDIR) -p '$(dist_dest)/Contents/MacOS'
 	$(MKDIR) -p '$(dist_dest)/$(LPROJ)'
 	rsync -a --exclude '*.in' $(srcdir)/macbuild/Contents '$(dist_dest)' --exclude English.lproj
 	rsync -a --exclude '*.in' $(srcdir)/macbuild/Contents/Resources/English.lproj/ '$(dist_dest)/$(LPROJ)'
-	$(call py_action,preprocessor,-Fsubstitution -DAPP_VERSION='$(MOZ_APP_VERSION)' -DAPP_VERSION_DISPLAY='$(MOZ_APP_VERSION_DISPLAY)' -DMOZ_APP_NAME='$(MOZ_APP_NAME)' -DMAC_APP_NAME='$(MAC_APP_NAME)' -DMOZ_MACBUNDLE_ID='$(MOZ_MACBUNDLE_ID)' -DMAC_BUNDLE_VERSION='$(MAC_BUNDLE_VERSION)' -DMOZ_DEVELOPER_REPO_PATH='$(topsrcdir)' -DMOZ_DEVELOPER_OBJ_PATH='$(topobjdir)' $(srcdir)/macbuild/Contents/Info.plist.in -o '$(dist_dest)/Contents/Info.plist')
+	$(call py_action,preprocessor,-Fsubstitution -DAPP_VERSION='$(MOZ_APP_VERSION)' -DAPP_VERSION_DISPLAY='$(MOZ_APP_VERSION_DISPLAY)' -DMOZ_APP_NAME='$(BINARY)' -DMAC_APP_NAME='$(MAC_APP_NAME)' -DMOZ_MACBUNDLE_ID='$(MOZ_MACBUNDLE_ID)' -DMAC_BUNDLE_VERSION='$(MAC_BUNDLE_VERSION)' -DMOZ_DEVELOPER_REPO_PATH='$(topsrcdir)' -DMOZ_DEVELOPER_OBJ_PATH='$(topobjdir)' $(srcdir)/macbuild/Contents/Info.plist.in -o '$(dist_dest)/Contents/Info.plist')
 	$(call py_action,preprocessor,-Fsubstitution --output-encoding utf-16 -DMAC_APP_NAME='$(MAC_APP_NAME)' $(srcdir)/macbuild/Contents/Resources/English.lproj/InfoPlist.strings.in -o '$(dist_dest)/$(LPROJ)/InfoPlist.strings')
 	rsync -a --exclude-from='$(objdir)/macbuild/Contents/MacOS-files.txt' $(DIST)/bin/ '$(dist_dest)/Contents/Resources'
 	rsync -a --include-from='$(objdir)/macbuild/Contents/MacOS-files.txt' --exclude '*' $(DIST)/bin/ '$(dist_dest)/Contents/MacOS'
 	# MacOS-files-copy.in is a list of files that should be copies rather
 	# than symlinks and placed in .app/Contents/MacOS.
 	rsync -aL --include-from='$(srcdir)/macbuild/Contents/MacOS-files-copy.in' --exclude '*' $(DIST)/bin/ '$(dist_dest)/Contents/MacOS'
-	$(RM) '$(dist_dest)/Contents/MacOS/$(MOZ_APP_NAME)'
-	rsync -aL $(DIST)/bin/$(MOZ_APP_NAME) '$(dist_dest)/Contents/MacOS'
+	$(RM) '$(dist_dest)/Contents/MacOS/$(BINARY)'
+	rsync -aL $(DIST)/bin/$(BINARY) '$(dist_dest)/Contents/MacOS'
 	$(MKDIR) -p '$(dist_dest)/Contents/Library/Spotlight'
 	rsync -a --copy-unsafe-links $(DIST)/package/thunderbird.mdimporter '$(dist_dest)/Contents/Library/Spotlight'
-	cp -RL $(topsrcdir)/$(MOZ_BRANDING_DIRECTORY)/thunderbird.icns '$(dist_dest)/Contents/Resources/thunderbird.icns'
+	cp -RL $(topsrcdir)/$(MOZ_BRANDING_DIRECTORY)/betterbird.icns '$(dist_dest)/Contents/Resources/betterbird.icns'
 	$(MKDIR) -p '$(dist_dest)/Contents/Library/LaunchServices'
 ifdef MOZ_UPDATER
 	mv -f '$(dist_dest)/Contents/MacOS/updater.app/Contents/MacOS/org.mozilla.updater' '$(dist_dest)/Contents/Library/LaunchServices'
 	ln -s ../../../../Library/LaunchServices/org.mozilla.updater '$(dist_dest)/Contents/MacOS/updater.app/Contents/MacOS/org.mozilla.updater'
 endif
 	printf APPLMOZM > '$(dist_dest)/Contents/PkgInfo'
 endif
 
diff --git a/mail/app/macbuild/Contents/Info.plist.in b/mail/app/macbuild/Contents/Info.plist.in
--- a/mail/app/macbuild/Contents/Info.plist.in
+++ b/mail/app/macbuild/Contents/Info.plist.in
@@ -4,17 +4,17 @@
 <dict>
 	<key>CFBundleDevelopmentRegion</key>
 	<string>English</string>
 	<key>CFBundleExecutable</key>
 	<string>@MOZ_APP_NAME@</string>
 	<key>CFBundleGetInfoString</key>
 	<string>@MAC_APP_NAME@ @APP_VERSION_DISPLAY@</string>
 	<key>CFBundleIconFile</key>
-	<string>thunderbird.icns</string>
+	<string>betterbird.icns</string>
 	<key>CFBundleIdentifier</key>
 	<string>@MOZ_MACBUNDLE_ID@</string>
 	<key>CFBundleInfoDictionaryVersion</key>
 	<string>6.0</string>
 	<key>CFBundleName</key>
 	<string>@MAC_APP_NAME@</string>
 	<key>CFBundlePackageType</key>
 	<string>APPL</string>
diff --git a/mail/app/macbuild/Contents/MacOS-files.in b/mail/app/macbuild/Contents/MacOS-files.in
--- a/mail/app/macbuild/Contents/MacOS-files.in
+++ b/mail/app/macbuild/Contents/MacOS-files.in
@@ -1,16 +1,16 @@
 #if 0
 ; Specifies files that should be copied (preserving symlinks) from dist/bin
 ; to the .app/Contents/MacOS directory.
 #endif
 #filter substitution
 /*.app/***
 /certutil
-/@MOZ_APP_NAME@-bin
+/betterbird-bin
 #if defined(MOZ_CRASHREPORTER)
 /minidump-analyzer
 #endif
 /pingsender
 /pk12util
 /rnp-cli
 /rnpkeys
 /ssltunnel
diff --git a/mail/app/module.ver b/mail/app/module.ver
--- a/mail/app/module.ver
+++ b/mail/app/module.ver
@@ -1,11 +1,11 @@
 WIN32_MODULE_DESCRIPTION=@MOZ_APP_DISPLAYNAME@
 WIN32_MODULE_PRODUCTNAME=@MOZ_APP_DISPLAYNAME@
 WIN32_MODULE_NAME=@MOZ_APP_DISPLAYNAME@
 WIN32_MODULE_FILEVERSION=@MOZ_APP_WINVERSION@
 WIN32_MODULE_FILEVERSION_STRING=@MOZ_APP_VERSION@
 WIN32_MODULE_PRODUCTVERSION=@MOZ_APP_WINVERSION@
 WIN32_MODULE_PRODUCTVERSION_STRING=@MOZ_APP_VERSION@
-WIN32_MODULE_COPYRIGHT=©Thunderbird and Mozilla Developers, according to the MPL 1.1/GPL 2.0/LGPL 2.1 licenses, as applicable.
-WIN32_MODULE_COMPANYNAME=Mozilla Corporation
-WIN32_MODULE_TRADEMARKS=Thunderbird is a Trademark of The Mozilla Foundation.
-WIN32_MODULE_COMMENT=Mozilla Thunderbird Mail and News Client
+WIN32_MODULE_COPYRIGHT=©Betterbird Developers, according to the MPL 2.0 license.
+WIN32_MODULE_COMPANYNAME=Betterbird Project
+WIN32_MODULE_TRADEMARKS=Betterbird is a Trademark of the Betterbird Project.
+WIN32_MODULE_COMMENT=Betterbird Mail, News and Chat Client
diff --git a/mail/app/moz.build b/mail/app/moz.build
--- a/mail/app/moz.build
+++ b/mail/app/moz.build
@@ -2,21 +2,21 @@
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 if CONFIG["MOZ_MACBUNDLE_NAME"]:
     DIRS += ["macbuild/Contents"]
 
 if CONFIG["MOZ_NO_PIE_COMPAT"]:
-    GeckoProgram(CONFIG["MOZ_APP_NAME"] + "-bin")
+    GeckoProgram("betterbird-bin")
 
     DIRS += ["no-pie"]
 else:
-    GeckoProgram(CONFIG["MOZ_APP_NAME"])
+    GeckoProgram("betterbird")
 
 USE_LIBS += ["mozglue"]
 SOURCES += ["nsMailApp.cpp"]
 LOCAL_INCLUDES += [
     "!/build",
     "/ipc/contentproc/",
     "/toolkit/xre",
     "/xpcom/base",
diff --git a/mail/app/no-pie/moz.build b/mail/app/no-pie/moz.build
--- a/mail/app/no-pie/moz.build
+++ b/mail/app/no-pie/moz.build
@@ -1,15 +1,15 @@
 # -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-
 # vim: set filetype=python:
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
-Program(CONFIG["MOZ_APP_NAME"])
+Program("betterbird")
 
 SOURCES += [
     "NoPie.c",
 ]
 
 # For some reason, LTO messes things up. We don't care anyways.
 CFLAGS += [
     "-fno-lto",
diff --git a/mail/app/nsMailApp.cpp b/mail/app/nsMailApp.cpp
--- a/mail/app/nsMailApp.cpp
+++ b/mail/app/nsMailApp.cpp
@@ -127,17 +127,17 @@ static MOZ_FORMAT_PRINTF(1, 2) void Outp
 #  else
   // Linking user32 at load-time interferes with the DLL blocklist (bug 932100).
   // This is a rare codepath, so we can load user32 at run-time instead.
   HMODULE user32 = LoadLibraryW(L"user32.dll");
   if (user32) {
     decltype(MessageBoxW)* messageBoxW =
         (decltype(MessageBoxW)*)GetProcAddress(user32, "MessageBoxW");
     if (messageBoxW) {
-      messageBoxW(nullptr, wide_msg, L"Thunderbird",
+      messageBoxW(nullptr, wide_msg, L"Betterbird",
                   MB_OK | MB_ICONERROR | MB_SETFOREGROUND);
     }
     FreeLibrary(user32);
   }
 #  endif
 #endif
 
   va_end(ap);
diff --git a/mail/app/thunderbird.exe.manifest b/mail/app/thunderbird.exe.manifest
--- a/mail/app/thunderbird.exe.manifest
+++ b/mail/app/thunderbird.exe.manifest
@@ -1,17 +1,17 @@
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
 <assemblyIdentity
         version="1.0.0.0"
         processorArchitecture="*"
-        name="Mozilla.Thunderbird"
+        name="Betterbird"
         type="win32"
 />
-<description>Mozilla Thunderbird</description>
+<description>Betterbird</description>
 <dependency>
         <dependentAssembly>
                 <assemblyIdentity
                         type="win32"
                         name="Microsoft.Windows.Common-Controls"
                         version="6.0.0.0"
                         processorArchitecture="*"
                         publicKeyToken="6595b64144ccf1df"
diff --git a/mail/base/content/buildconfig.html b/mail/base/content/buildconfig.html
--- a/mail/base/content/buildconfig.html
+++ b/mail/base/content/buildconfig.html
@@ -45,17 +45,17 @@
             </td>
           </tr>
           #endif
         </tbody>
       </table>
 
       <p>
         The latest information on building @MOZ_APP_DISPLAYNAME@ can be found at
-        <a href="@THUNDERBIRD_DEVELOPER_WWW@">@THUNDERBIRD_DEVELOPER_WWW@</a>.
+        <a href="https://github.com/Betterbird/thunderbird-patches">https://github.com/Betterbird/thunderbird-patches</a>.
       </p>
 
       <h2>Build platform</h2>
       <table>
         <tbody>
           <tr>
             <th>Target</th>
           </tr>
diff --git a/mail/components/about-support/content/aboutSupport.js b/mail/components/about-support/content/aboutSupport.js
--- a/mail/components/about-support/content/aboutSupport.js
+++ b/mail/components/about-support/content/aboutSupport.js
@@ -115,17 +115,18 @@ function toFluentID(str) {
     .toLowerCase();
 }
 
 // Each property in this object corresponds to a property in Troubleshoot.jsm's
 // snapshot data.  Each function is passed its property's corresponding data,
 // and it's the function's job to update the page with it.
 var snapshotFormatters = {
   async application(data) {
-    $("application-box").textContent = data.name;
+    // This comes form Services.appinfo.name likely via MOZ_APP_BASENAME.
+    $("application-box").textContent = "Betterbird";
     $("useragent-box").textContent = data.userAgent;
     $("os-box").textContent = data.osVersion;
     if (data.osTheme) {
       $("os-theme-box").textContent = data.osTheme;
     } else {
       $("os-theme-row").hidden = true;
     }
     if (AppConstants.platform == "macosx") {
diff --git a/mail/confvars.sh b/mail/confvars.sh
--- a/mail/confvars.sh
+++ b/mail/confvars.sh
@@ -1,13 +1,15 @@
 #! /bin/sh
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
+# We need to keep MOZ_APP_NAME thunderbird, otherwise all the code that checks
+# AppConstants.MOZ_APP_NAME won't work any more, and there is such code in M-C!
 MOZ_APP_NAME=thunderbird
 
 if test "$OS_ARCH" = "WINNT"; then
   if ! test "$HAVE_64BIT_BUILD"; then
     MOZ_VERIFY_MAR_SIGNATURE=1
   fi
 fi
 
diff --git a/mail/installer/Makefile.in b/mail/installer/Makefile.in
--- a/mail/installer/Makefile.in
+++ b/mail/installer/Makefile.in
@@ -1,12 +1,15 @@
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
+MOZ_PKG_APPNAME = betterbird
+MOZ_PKG_DIR = betterbird
+
 STANDALONE_MAKEFILE := 1
 # DIST_SUBDIR := mail  # Not sure why TB is not using this
 
 include $(topsrcdir)/config/rules.mk
 
 MOZ_PKG_REMOVALS = $(srcdir)/removed-files.in
 
 MOZ_PKG_MANIFEST = $(srcdir)/package-manifest.in
diff --git a/mail/installer/package-manifest.in b/mail/installer/package-manifest.in
--- a/mail/installer/package-manifest.in
+++ b/mail/installer/package-manifest.in
@@ -40,17 +40,17 @@
 #ifdef XP_MACOSX
 ; Mac bundle stuff
 @APPNAME@/Contents/Info.plist
 #ifdef MOZ_UPDATER
 @APPNAME@/Contents/Library/LaunchServices
 #endif
 @APPNAME@/Contents/PkgInfo
 @APPNAME@/Contents/Library/Spotlight/thunderbird.mdimporter/
-@RESPATH@/thunderbird.icns
+@RESPATH@/betterbird.icns
 @RESPATH@/@LPROJ_ROOT@.lproj/*
 #endif
 
 [@AB_CD@]
 @RESPATH@/@PREF_DIR@/all-l10n.js
 @RESPATH@/dictionaries/*
 @RESPATH@/localization/*
 #ifdef MOZ_BUNDLED_FONTS
@@ -144,23 +144,23 @@
 
 ; Optional RSS extension
 [newsblog]
 @RESPATH@/chrome/newsblog@JAREXT@
 @RESPATH@/chrome/newsblog.manifest
 
 [mail]
 #ifndef XP_UNIX
-@BINPATH@/@MOZ_APP_NAME@.exe
+@BINPATH@/betterbird.exe
 @BINPATH@/thunderbird.VisualElementsManifest.xml
 @BINPATH@/VisualElements/VisualElements_150.png
 @BINPATH@/VisualElements/VisualElements_70.png
 #else
-@BINPATH@/@MOZ_APP_NAME@-bin
-@BINPATH@/@MOZ_APP_NAME@
+@BINPATH@/betterbird-bin
+@BINPATH@/betterbird
 #endif
 @RESPATH@/application.ini
 #ifdef MOZ_UPDATER
 @RESPATH@/update-settings.ini
 #endif
 @BINPATH@/@DLL_PREFIX@lgpllibs@DLL_SUFFIX@
 #ifdef MOZ_FFVPX
 @BINPATH@/@DLL_PREFIX@mozavutil@DLL_SUFFIX@
diff --git a/mail/installer/windows/Makefile.in b/mail/installer/windows/Makefile.in
--- a/mail/installer/windows/Makefile.in
+++ b/mail/installer/windows/Makefile.in
@@ -1,12 +1,15 @@
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
+MOZ_PKG_APPNAME = betterbird
+MOZ_PKG_DIR = betterbird
+
 include $(topsrcdir)/toolkit/mozapps/installer/package-name.mk
 
 CONFIG_DIR = instgen
 SFX_MODULE = $(commtopsrcdir)/other-licenses/7zstub/thunderbird/7zSD.sfx
 
 INSTALLER_FILES = \
 	app.tag \
 	nsis/installer.nsi \
diff --git a/mail/installer/windows/moz.build b/mail/installer/windows/moz.build
--- a/mail/installer/windows/moz.build
+++ b/mail/installer/windows/moz.build
@@ -6,10 +6,9 @@
 DEFINES["APP_VERSION"] = CONFIG["MOZ_APP_VERSION"]
 
 DEFINES["MOZ_APP_NAME"] = CONFIG["MOZ_APP_NAME"]
 DEFINES["MOZ_APP_DISPLAYNAME"] = CONFIG["MOZ_APP_DISPLAYNAME"]
 DEFINES["MOZILLA_VERSION"] = CONFIG["MOZILLA_VERSION"]
 DEFINES["MOZ_APP_VERSION"] = CONFIG["MOZ_APP_VERSION"]
 DEFINES["PRE_RELEASE_SUFFIX"] = ""
 
-# Turn `thunderbird` into `Thunderbird`.
-DEFINES["MOZ_TOAST_APP_NAME"] = "%s" % CONFIG["MOZ_APP_NAME"].title()
+DEFINES["MOZ_TOAST_APP_NAME"] = "Betterbird"
diff --git a/mail/installer/windows/nsis/defines.nsi.in b/mail/installer/windows/nsis/defines.nsi.in
--- a/mail/installer/windows/nsis/defines.nsi.in
+++ b/mail/installer/windows/nsis/defines.nsi.in
@@ -1,32 +1,32 @@
 #filter substitution
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 
 # These defines should match application.ini settings
-!define AppName               "Thunderbird"
+!define AppName               "Betterbird"
 !define AppVersion            "@MOZ_APP_VERSION@"
 
 !define GREVersion            @MOZILLA_VERSION@
 !define AB_CD                 "@AB_CD@"
 
-!define FileMainEXE           "@MOZ_APP_NAME@.exe"
-!define WindowClass           "ThunderbirdMessageWindow"
+!define FileMainEXE           "betterbird.exe"
+!define WindowClass           "BetterbirdMessageWindow"
 
-!define AppRegNameMail        "Thunderbird"
-!define AppRegNameNews        "Thunderbird (News)"
-!define AppRegNameCalendar    "Thunderbird (Calendar)"
+!define AppRegNameMail        "Betterbird"
+!define AppRegNameNews        "Betterbird (News)"
+!define AppRegNameCalendar    "Betterbird (Calendar)"
 !define ToastAumidPrefix      "@MOZ_TOAST_APP_NAME@Toast-"
 
-!define ClientsRegName        "Mozilla Thunderbird"
+!define ClientsRegName        "Betterbird"
 
-!define BrandProductName      "Thunderbird"
+!define BrandProductName      "Betterbird"
 !define BrandShortName        "@MOZ_APP_DISPLAYNAME@"
 !ifndef BrandFullName
 !define BrandFullName         "${BrandFullNameInternal}"
 !endif
 
 # Due to official and beta using the same branding (and`thus the same install
 # directory), this is used to differentiate between them.
 !if "@MOZ_UPDATE_CHANNEL@" == "beta"
@@ -73,15 +73,15 @@
 !define MOZ_BITS_DOWNLOAD
 #endif
 
 # File details shared by both the installer and uninstaller
 VIProductVersion "1.0.0.0"
 VIAddVersionKey "ProductName"     "${BrandShortName}"
 VIAddVersionKey "CompanyName"     "${CompanyName}"
 #ifdef MOZ_OFFICIAL_BRANDING
-VIAddVersionKey "LegalTrademarks" "${BrandShortName} is a Trademark of The Mozilla Foundation."
+VIAddVersionKey "LegalTrademarks" "${BrandShortName} is a Trademark of the Betterbird Project."
 #endif
 VIAddVersionKey "LegalCopyright"  "${CompanyName}"
 VIAddVersionKey "FileVersion"     "${AppVersion}"
 VIAddVersionKey "ProductVersion"  "${AppVersion}"
 # Comments is not used but left below commented out for future reference
 # VIAddVersionKey "Comments"        "Comments"
diff --git a/mail/installer/windows/nsis/shared.nsh b/mail/installer/windows/nsis/shared.nsh
--- a/mail/installer/windows/nsis/shared.nsh
+++ b/mail/installer/windows/nsis/shared.nsh
@@ -773,17 +773,17 @@
 
 
     ; Write the uninstall registry keys
     ${WriteRegStr2} $1 "$0" "Comments" "${BrandFullNameInternal} ${AppVersion} (${ARCH} ${AB_CD})" 0
     ${WriteRegStr2} $1 "$0" "DisplayIcon" "$8\${FileMainEXE},0" 0
     ${WriteRegStr2} $1 "$0" "DisplayName" "${BrandFullNameInternal} (${ARCH} ${AB_CD})" 0
     ${WriteRegStr2} $1 "$0" "DisplayVersion" "${AppVersion}" 0
     ${WriteRegStr2} $1 "$0" "InstallLocation" "$8" 0
-    ${WriteRegStr2} $1 "$0" "Publisher" "Mozilla" 0
+    ${WriteRegStr2} $1 "$0" "Publisher" "Betterbird Project" 0
     ${WriteRegStr2} $1 "$0" "UninstallString" "$\"$8\uninstall\helper.exe$\"" 0
     ${WriteRegStr2} $1 "$0" "URLInfoAbout" "${URLInfoAbout}" 0
     ${WriteRegStr2} $1 "$0" "URLUpdateInfo" "${URLUpdateInfo}" 0
     ${WriteRegDWORD2} $1 "$0" "NoModify" 1 0
     ${WriteRegDWORD2} $1 "$0" "NoRepair" 1 0
 
     ${GetSize} "$8" "/S=0K" $R2 $R3 $R4
     ${WriteRegDWORD2} $1 "$0" "EstimatedSize" $R2 0
diff --git a/mail/modules/WindowsJumpLists.jsm b/mail/modules/WindowsJumpLists.jsm
--- a/mail/modules/WindowsJumpLists.jsm
+++ b/mail/modules/WindowsJumpLists.jsm
@@ -174,17 +174,17 @@ var WinTaskbarJumpList = {
   /**
    * Jump list item creation helpers
    */
 
   _createHandlerAppItem(aTask) {
     let file = Services.dirsvc.get("XCurProcD", Ci.nsIFile);
 
     // XXX where can we grab this from in the build? Do we need to?
-    file.append("thunderbird.exe");
+    file.append("betterbird.exe");
 
     let handlerApp = Cc[
       "@mozilla.org/uriloader/local-handler-app;1"
     ].createInstance(Ci.nsILocalHandlerApp);
     handlerApp.executable = file;
     // handlers default to the leaf name if a name is not specified
     let title = aTask.title;
     if (title && title.length != 0) {
diff --git a/mail/moz.configure b/mail/moz.configure
--- a/mail/moz.configure
+++ b/mail/moz.configure
@@ -2,16 +2,17 @@
 # vim: set filetype=python:
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 set_config("MOZ_THUNDERBIRD", True)
 set_define("MOZ_THUNDERBIRD", True)
 
+# We can't set this to Betterbird or else Thunderbird profiles won't be recognised.
 imply_option("MOZ_APP_BASENAME", "Thunderbird")
 set_config("MOZ_APPUPDATE_HOST", "aus.thunderbird.net")
 
 imply_option("--enable-default-browser-agent", False)
 imply_option("MOZ_REQUIRE_SIGNING", False)
 imply_option("MOZ_SERVICES_SYNC", True)
 
 
@@ -32,17 +33,22 @@ def commtopsrcdir(build_env, _):
     return join(topsrcdir, "comm")
 
 
 add_old_configure_assignment("commtopsrcdir", commtopsrcdir)
 set_config("commtopsrcdir", commtopsrcdir)
 
 
 imply_option("MOZ_PLACES", True)
-imply_option("MOZ_SERVICES_HEALTHREPORT", True)
+# MOZ_DATA_REPORTING is set if any of MOZ_TELEMETRY_REPORTING, MOZ_SERVICES_HEALTHREPORT,
+# --enable-crashreporter or MOZ_NORMANDY are set:
+# https://searchfox.org/mozilla-central/rev/3b707c8fd7e978eebf24279ee51ccf07895cfbcb/toolkit/moz.configure#3076
+# So let's switch the remaining two off now.
+imply_option("MOZ_SERVICES_HEALTHREPORT", False)
+imply_option("MOZ_NORMANDY", False)
 imply_option("MOZ_DEDICATED_PROFILES", True)
 imply_option("MOZ_BLOCK_PROFILE_DOWNGRADE", True)
 
 with only_when(target_has_linux_kernel & compile_environment):
     option(env="MOZ_NO_PIE_COMPAT", help="Enable non-PIE wrapper")
 
     set_config("MOZ_NO_PIE_COMPAT", depends_if("MOZ_NO_PIE_COMPAT")(lambda _: True))
 
