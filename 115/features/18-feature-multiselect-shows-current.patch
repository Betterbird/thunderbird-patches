# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Date 1683053945 -7200
# Parent  51bbe75a250d3f89bef12255d3b8cc2d068423d0
Feature: When multiple message are selected, current message is shown.

diff --git a/mail/app/profile/all-thunderbird.js b/mail/app/profile/all-thunderbird.js
--- a/mail/app/profile/all-thunderbird.js
+++ b/mail/app/profile/all-thunderbird.js
@@ -1403,16 +1403,19 @@ pref("app.donation.eoy.version.viewed", 
 // Use our own prefs for the end-of-year appeal. Otherwise running TB on the
 // profile would show the TB appeal and then never again the BB appeal.
 pref("betterbird.donation.eoy.version", 2022);
 pref("betterbird.donation.eoy.version.viewed", 0);
 pref("betterbird.donation.eoy.url", "https://www.betterbird.eu/end-of-year/");
 
 // Make this visible in the advanced preferences.
 pref("ui.prefersReducedMotion", 0);
+
+pref("mail.multiselect_message_shows_current", false);
+
 // IMAP-JS disabled, Bug 1707547.
 pref("mailnews.imap.jsmodule", false);
 
 // Unified toolbar
 
 // 0: icons beside text
 // 1: icons above text
 // 2: icons only
diff --git a/mail/base/content/about3Pane.js b/mail/base/content/about3Pane.js
--- a/mail/base/content/about3Pane.js
+++ b/mail/base/content/about3Pane.js
@@ -2919,17 +2919,23 @@ var threadPane = {
         messagePane.clearMessage();
         messagePane.clearMessages();
         return;
       case 1:
         let uri = gDBView.getURIForViewIndex(threadTree.selectedIndex);
         messagePane.displayMessage(uri);
         return;
       default:
-        messagePane.displayMessages(gDBView.getSelectedMsgHdrs());
+        if (Services.prefs.getBoolPref("mail.multiselect_message_shows_current", false)) {
+          let uri = gDBView.getURIForViewIndex(threadTree.currentIndex);
+          messagePane.displayMessage(uri);
+          return;
+        } else {
+          messagePane.displayMessages(gDBView.getSelectedMsgHdrs());
+        }
     }
   },
 
   /**
    * Handle threadPane drag events.
    */
   _onDragStart(event) {
     let row = event.target.closest(`tr[is^="thread-"]`);
