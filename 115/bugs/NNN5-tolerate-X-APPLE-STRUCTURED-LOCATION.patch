# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Date 1704828233 -3600
# Parent  7695f08b326f81fee7b9c0dccf1a2282a809b419
Bug NNN5 - Tolerate X-APPLE-STRUCTURED-LOCATION.

diff --git a/calendar/providers/storage/CalStorageItemModel.jsm b/calendar/providers/storage/CalStorageItemModel.jsm
--- a/calendar/providers/storage/CalStorageItemModel.jsm
+++ b/calendar/providers/storage/CalStorageItemModel.jsm
@@ -839,17 +839,25 @@ class CalStorageItemModel extends CalSto
         });
 
         this.db.prepareStatement(selectParam);
         selectParam.params.item_id = item.id;
         await this.db.executeAsync(selectParam, row => {
           let prop = row.getResultByName("key1");
           let param = row.getResultByName("key2");
           let value = row.getResultByName("value");
-          item.setPropertyParameter(prop, param, value);
+          try {
+            item.setPropertyParameter(prop, param, value);
+          } catch (ex) {
+            if (prop == "X-APPLE-STRUCTURED-LOCATION") {
+              console.info(`${item.title}: Ignoring ${prop}: ${param} = "${value}"`);
+            } else {
+              throw ex;
+            }
+          }
         });
       } catch (e) {
         this.db.logError(
           "Error getting extra properties for item '" + item.title + "' (" + item.id + ")!",
           e
         );
       }
     }
