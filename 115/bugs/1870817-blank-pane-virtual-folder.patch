# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Date 1702991429 -3600
# Parent  ab2961bd917d8a1a4f3f465ad0cacbdb8f964bde
Bug 1870817 - catch another case of a blank 3pane if virtual folder can't be restored.

diff --git a/mail/base/content/about3Pane.js b/mail/base/content/about3Pane.js
--- a/mail/base/content/about3Pane.js
+++ b/mail/base/content/about3Pane.js
@@ -948,25 +948,34 @@ var folderPane = {
             }
           }
           let row = folderPane._createFolderRow(this.name, folder);
           this.containerList.appendChild(row);
           folderType.folderURI = folder.URI;
           folderType.list = row.childList;
 
           // Display the searched folders for this type.
-          let wrappedFolder = VirtualFolderHelper.wrapVirtualFolder(folder);
-          for (let searchFolder of wrappedFolder.searchFolders) {
-            if (searchFolder != folder) {
-              this._addSearchedFolder(
-                folderType,
-                folderPane._getNonGmailParent(searchFolder),
-                searchFolder
-              );
+          try {
+            let wrappedFolder = VirtualFolderHelper.wrapVirtualFolder(folder);
+            for (let searchFolder of wrappedFolder.searchFolders) {
+              if (searchFolder != folder) {
+                this._addSearchedFolder(
+                  folderType,
+                  folderPane._getNonGmailParent(searchFolder),
+                  searchFolder
+                );
+              }
             }
+          } catch (ex) {
+            console.error(
+              new Error(
+                `Unable to access the search folders of ${folder.URI}`,
+                { cause: ex }
+              )
+            );
           }
         }
         MailServices.accounts.saveVirtualFolders();
       },
 
       _addSearchedFolder(folderType, parentFolder, childFolder) {
         if (folderType.flag & childFolder.flags) {
           // The folder has the flag for this type.
