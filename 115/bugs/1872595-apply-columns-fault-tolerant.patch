# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Date 1726491901 -7200
# Parent  6400e37431597cd376873d109d1cee0e971881a6
Bug 1872595 - Make 'Apply Columns' fault tolerant.

diff --git a/mail/base/content/about3Pane.js b/mail/base/content/about3Pane.js
--- a/mail/base/content/about3Pane.js
+++ b/mail/base/content/about3Pane.js
@@ -6810,13 +6810,17 @@ var threadPane = {
         ThreadPaneColumns.isOutgoing(folder) == currentFolderIsOutgoing
           ? columStateString
           : swappedColumnStateString;
 
-      folder.msgDatabase.dBFolderInfo.setCharProperty(
-        "columnStates",
-        colStateString
-      );
-      folder.msgDatabase.commit(Ci.nsMsgDBCommitType.kLargeCommit);
+      try {
+        folder.msgDatabase.dBFolderInfo.setCharProperty(
+          "columnStates",
+          colStateString
+        );
+        folder.msgDatabase.commit(Ci.nsMsgDBCommitType.kLargeCommit);
+      } catch (ex) {
+        console.warn(`Skipping folder "${folder.name}" due to: ${ex.message}`);
+      }
       // Force the reference to be forgotten.
       folder.msgDatabase = null;
     };
 
