# HG changeset patch
# User welpy-cw <h.w.forms@arcor.de>
# Date 1700590261 -3600
# Node ID 03487bd5c38a5f7244aad6c65b4d4f91152b8ec5
# Parent  e8f323f95a9ed030cffd3b6b535e4e6f5f8a9ed9
Bug 1864352 - Skip restoreThreadState() when opening synthetic views. r=mkmelin

Differential Revision: https://phabricator.services.mozilla.com/D193387

diff --git a/mail/base/content/mailCommon.js b/mail/base/content/mailCommon.js
--- a/mail/base/content/mailCommon.js
+++ b/mail/base/content/mailCommon.js
@@ -997,17 +997,20 @@ var dbViewWrapperListener = {
         tab,
         isSearching && searchBundle.GetStringFromName("searchingMessage")
       );
     }
   },
   onCreatedView() {
     if (window.threadTree) {
       window.threadPane.setTreeView(gViewWrapper.dbView);
-      window.threadPane.restoreThreadState();
+      // There is no persisted thread last expanded state for synthetic views.
+      if (!gViewWrapper.isSynthetic) {
+        window.threadPane.restoreThreadState();
+      }
       window.threadPane.isFirstScroll = true;
       window.threadPane.scrollDetected = false;
       window.threadPane.scrollToLatestRowIfNoSelection();
     }
   },
   onDestroyingView(folderIsComingBack) {
     if (!window.threadTree) {
       return;
