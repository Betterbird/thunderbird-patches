# HG changeset patch
# Date 1709828402 -3600
# User Geoff Lankow <geoff@thunderbird.net>
# Parent  71a5d2bb2519db56b4c208fab372f3632b4b8e54
Bug 1864582 - Don't set a folder sort order value when no siblings are sorted. r=#thunderbird-reviewers

diff --git a/mail/base/content/about3Pane.js b/mail/base/content/about3Pane.js
--- a/mail/base/content/about3Pane.js
+++ b/mail/base/content/about3Pane.js
@@ -3969,14 +3969,16 @@ var folderPane = {
       if (order != Ci.nsIMsgFolder.NO_SORT_VALUE && order > maxOrderValue) {
         maxOrderValue = order;
       }
     }
-    // If maxOrderValue is still negative, then none of the sibling folders
-    // have a sort order value (i.e. this group of folders has never been
-    // manually sorted). In this case, the natural order should still be used.
-    // Otherwise the new folder will be at the bottom of the group.
-    const newOrder =
-      maxOrderValue < 0 ? Ci.nsIMsgFolder.NO_SORT_VALUE : maxOrderValue + 1;
+    if (maxOrderValue == -1) {
+      // If maxOrderValue is still negative, then none of the sibling folders
+      // have a sort order value (i.e. this group of folders has never been
+      // manually sorted). In this case, the natural order should still be used.
+      // Otherwise the new folder will be at the bottom of the group.
+      return;
+    }
+    const newOrder = maxOrderValue + 1;
     folder.userSortOrder = newOrder; // Update DB
     this.setOrderToRowInAllModes(folder, newOrder); // Update row info.
   },
 
