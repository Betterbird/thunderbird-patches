# HG changeset patch
# User Ping Chen <remotenonsense@gmail.com>
# Date 1664397024 -7200
# Parent  f3ad30c1b8ddab445cdac5e41105e6c70218b9f0

diff --git a/mailnews/news/src/nsNewsFolder.cpp b/mailnews/news/src/nsNewsFolder.cpp
--- a/mailnews/news/src/nsNewsFolder.cpp
+++ b/mailnews/news/src/nsNewsFolder.cpp
@@ -762,29 +762,33 @@ NS_IMETHODIMP nsMsgNewsFolder::GetNextNM
 
 nsresult nsMsgNewsFolder::GetNewsMessages(nsIMsgWindow* aMsgWindow,
                                           bool aGetOld,
                                           nsIUrlListener* aUrlListener) {
   nsresult rv = NS_OK;
 
   bool isNewsServer = false;
   rv = GetIsServer(&isNewsServer);
-  if (NS_FAILED(rv)) return rv;
+  NS_ENSURE_SUCCESS(rv, rv);
 
-  if (isNewsServer)
-    // get new messages only works on a newsgroup, not a news server
-    return NS_OK;
+  if (isNewsServer) {
+    nsCOMPtr<nsIMsgIncomingServer> server;
+    rv = GetServer(getter_AddRefs(server));
+    NS_ENSURE_SUCCESS(rv, rv);
+
+    return server->PerformExpand(aMsgWindow);
+  }
 
   nsCOMPtr<nsINntpService> nntpService =
       do_GetService(NS_NNTPSERVICE_CONTRACTID, &rv);
   NS_ENSURE_SUCCESS(rv, rv);
 
   nsCOMPtr<nsINntpIncomingServer> nntpServer;
   rv = GetNntpServer(getter_AddRefs(nntpServer));
-  if (NS_FAILED(rv)) return rv;
+  NS_ENSURE_SUCCESS(rv, rv);
 
   nsCOMPtr<nsIURI> resultUri;
   rv = nntpService->GetNewNews(nntpServer, mURI, aGetOld, this, aMsgWindow,
                                getter_AddRefs(resultUri));
   if (aUrlListener && NS_SUCCEEDED(rv) && resultUri) {
     nsCOMPtr<nsIMsgMailNewsUrl> msgUrl(do_QueryInterface(resultUri));
     if (msgUrl) msgUrl->RegisterListener(aUrlListener);
   }
