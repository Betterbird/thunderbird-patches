# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Date 1757636648 -7200
# Parent  62c3dfb9d0d9b33cf240bb14132d6fa62c27fefd
Bug 1988288 - Always show missed reminders for future events.

diff --git a/calendar/base/src/CalAlarmService.sys.mjs b/calendar/base/src/CalAlarmService.sys.mjs
--- a/calendar/base/src/CalAlarmService.sys.mjs
+++ b/calendar/base/src/CalAlarmService.sys.mjs
@@ -411,9 +411,9 @@ CalAlarmService.prototype = {
       // don't add the alarm.
       return;
     }
 
-    const showMissed = Services.prefs.getBoolPref("calendar.alarms.showmissed", false);
+    let showMissed = Services.prefs.getBoolPref("calendar.alarms.showmissed", false);
 
     const alarms = aItem.getAlarms();
     for (const alarm of alarms) {
       let alarmDate = cal.alarms.calculateAlarmDate(aItem, alarm);
@@ -496,8 +496,16 @@ CalAlarmService.prototype = {
           itemEnd.isDate = false;
           ongoingEvent = now.compare(itemStart) >= 0 && now.compare(itemEnd) <= 0;
         }
 
+        // Always show missed reminders for future events.
+        if (itemStart) {
+          itemStart.isDate = false;
+          if (now.compare(itemStart) <= 0) {
+            showMissed = true;
+          }
+        }
+
         if (showMissed || ongoingEvent) {
           // The alarm was not snoozed or dismissed, fire it now.
           // Or if the event is ongoing but we haven't fired. Especially important
           // for all-day events where alarm would have set off at midnight.
