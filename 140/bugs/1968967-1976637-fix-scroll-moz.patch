# HG changeset patch
# User Hiroyuki Ikezoe <hikezoe.birchill@mozilla.com>
# Parent  68760f3d2755f747a192a0f5505d88c1cd744190
Bug 1968967/1976637 - Fix unwanted scrolling when switching from mail tab to 3pane tab.

diff --git a/gfx/layers/apz/src/AsyncPanZoomController.cpp b/gfx/layers/apz/src/AsyncPanZoomController.cpp
--- a/gfx/layers/apz/src/AsyncPanZoomController.cpp
+++ b/gfx/layers/apz/src/AsyncPanZoomController.cpp
@@ -5672,9 +5672,9 @@ void AsyncPanZoomController::NotifyLayer
     ScrollGeneration oldScrollGeneration = Metrics().GetScrollGeneration();
     CSSPoint oldLayoutScrollOffset = Metrics().GetLayoutScrollOffset();
     CSSPoint oldVisualScrollOffset = Metrics().GetVisualScrollOffset();
     mScrollMetadata = aScrollMetadata;
-    if (!aScrollMetadata.GetScrollUpdates().IsEmpty()) {
+    if (!aScrollMetadata.GetScrollUpdates().IsEmpty() && !isDefault) {
       Metrics().SetScrollGeneration(oldScrollGeneration);
       Metrics().SetLayoutScrollOffset(oldLayoutScrollOffset);
       Metrics().SetVisualScrollOffset(oldVisualScrollOffset);
     }
