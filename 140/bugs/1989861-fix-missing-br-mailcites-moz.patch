# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Parent  7502ac42f5f933c06104a5f4ad1e47180174bac0
Bug 1989861 - Fix disappearing br when breaking mailcites.

diff --git a/editor/libeditor/HTMLEditor.cpp b/editor/libeditor/HTMLEditor.cpp
--- a/editor/libeditor/HTMLEditor.cpp
+++ b/editor/libeditor/HTMLEditor.cpp
@@ -4698,8 +4698,12 @@ nsresult HTMLEditor::EnsureNoFollowingUn
                  !unnecessaryLineBreak->IsDeletableFromComposedDoc())) {
     return NS_OK;
   }
   if (unnecessaryLineBreak->IsHTMLBRElement()) {
+    if (IsPlaintextMailComposer()) {
+      // Do not delete <br>s in the mail composer.
+      return NS_OK;
+    }
     // If the invisible break is a placeholder of ancestor inline elements, we
     // should not delete it to allow users to insert text with the format
     // specified by them.
     if (HTMLEditUtils::GetMostDistantAncestorEditableEmptyInlineElement(
