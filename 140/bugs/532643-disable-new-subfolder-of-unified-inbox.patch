# HG changeset patch
# User welpy-cw <h.w.forms@arcor.de>
# Date 1768757265 -3600
# Node ID 1bb5d0385de848dcca6b4ebba764a12b4ea6f2a6
# Parent  b036e724aeddd32f99c6c225c02fb6a30b4ddd9c
Bug 532643 - Disable cmd_newFolder for Unified Inbox. r=mkmelin

Differential Revision: https://phabricator.services.mozilla.com/D278757

diff --git a/mail/base/content/about3Pane.js b/mail/base/content/about3Pane.js
--- a/mail/base/content/about3Pane.js
+++ b/mail/base/content/about3Pane.js
@@ -342,9 +342,8 @@ var folderPaneContextMenu = {
     let isServer;
     let isNNTP;
     let isJunk;
     let isVirtual;
-    let isInbox;
     let isSmartTagsFolder;
     let deletable;
     let server;
     let flags;
@@ -355,9 +354,8 @@ var folderPaneContextMenu = {
     if (multiSelection) {
       canCreateSubfolders = false;
       canRename = false;
       isSmartTagsFolder = false;
-      isInbox = false;
 
       // Set some variables to TRUE to help during the folder lookup loop.
       online = true;
       canCompact = true;
@@ -413,9 +411,8 @@ var folderPaneContextMenu = {
         this.activeFolder.isCommandEnabled("cmd_compactFolder");
       isNNTP = server.type == "nntp";
       isJunk = flags & Ci.nsMsgFolderFlags.Junk;
       isVirtual = flags & Ci.nsMsgFolderFlags.Virtual;
-      isInbox = flags & Ci.nsMsgFolderFlags.Inbox;
       isSmartTagsFolder = FolderUtils.isSmartTagsFolder(this.activeFolder);
     }
 
     if (isNNTP && !isServer) {
@@ -423,9 +420,9 @@ var folderPaneContextMenu = {
       deletable = true;
     }
 
     this._commandStates = {
-      cmd_newFolder: online && ((!isNNTP && canCreateSubfolders) || isInbox),
+      cmd_newFolder: online && canCreateSubfolders,
       cmd_deleteFolder: online && deletable,
       cmd_renameFolder: online && canRename,
       cmd_compactFolder:
         !isVirtual && !isNNTP && (isServer || canCompact) && isCompactEnabled,
@@ -572,12 +569,9 @@ var folderPaneContextMenu = {
       "folderPaneContext-newsUnsubscribe",
       isRealFolder && serverType == "nntp"
     );
 
-    const showNewFolderItem =
-      (serverType != "nntp" && canCreateSubfolders) ||
-      flags & Ci.nsMsgFolderFlags.Inbox;
-    if (showNewFolderItem) {
+    if (canCreateSubfolders) {
       document
         .getElementById("folderPaneContext-new")
         .setAttribute(
           "label",
