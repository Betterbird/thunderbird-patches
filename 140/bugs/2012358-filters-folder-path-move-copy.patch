# HG changeset patch
# User welpy-cw <h.w.forms@arcor.de>
# Date 1771067599 -39600
# Node ID 7ef394bc86a2998d648f830c7eadb40d9c665255
# Parent  e072efa8b8270dcdbfa7bec2e754a80b7d3ed66b
Bug 2012358 - Improve folder path visibility in folder pickers and filter editor. r=mkmelin


- Add a tooltip to the folder picker showing the complete folder path.

- Display the full folder path for rule action targets in the filter editor.

- Update the separator between the folder path and server name from a hyphen
  to an en dash (–) for better typographic clarity.

Differential Revision: https://phabricator.services.mozilla.com/D280409

diff --git a/mailnews/base/content/folder-menupopup.js b/mailnews/base/content/folder-menupopup.js
--- a/mailnews/base/content/folder-menupopup.js
+++ b/mailnews/base/content/folder-menupopup.js
@@ -646,9 +646,9 @@
             submenu.childWrapper.appendChild(this._buildSeparator());
           }
           const attributes = {
             label: folderItem.label,
-            tooltiptext: `${folderItem.folderPath} - ${folderItem.serverName}`,
+            tooltiptext: `${folderItem.folderPath} – ${folderItem.serverName}`,
             crop: "start",
             ...this._getCssSelectorAttributes(folderItem.folder),
           };
           submenu.childWrapper.appendChild(
@@ -919,9 +919,9 @@
        * selected folder. The desired format is set as the 'displayformat'
        * attribute of the folderpicker's <menulist>, one of:
        * 'name' (default) - Folder
        * 'verbose'        - Folder on Account
-       * 'path'           - Account/Folder/Subfolder
+       * 'path'           - Folder/Subfolder – Account
        *
        * @param {nsIMsgFolder} folder - The folder that corresponds to the menu/menuitem.
        * @returns {string} The display name.
        */
@@ -937,9 +937,9 @@
           );
         }
 
         if (this._displayformat == "path") {
-          return lazy.FeedUtils.getFolderPrettyPath(folder) || folder.name;
+          return `${folder.prettyPath} – ${folder.server.prettyName}`;
         }
 
         return folder.name;
       }
@@ -960,8 +960,15 @@
         function setupParent(folder, menulist, noFolders) {
           const menupopup = menulist.menupopup;
           if (folder) {
             menulist.setAttribute("label", menupopup.getDisplayName(folder));
+            const prettyPath = folder.prettyPath;
+            if (prettyPath) {
+              menulist.setAttribute(
+                "tooltiptext",
+                `${prettyPath} – ${folder.server.prettyName}`
+              );
+            }
           } else if (noFolders) {
             menulist.setAttribute(
               "label",
               menupopup._stringBundle.GetStringFromName("noFolders")
diff --git a/mailnews/search/content/searchWidgets.js b/mailnews/search/content/searchWidgets.js
--- a/mailnews/search/content/searchWidgets.js
+++ b/mailnews/search/content/searchWidgets.js
@@ -139,9 +139,9 @@
           `
           <menulist class="ruleactionitem
                     folderMenuItem"
                     flex="1"
-                    displayformat="verbose">
+                    displayformat="path">
             <menupopup is="folder-menupopup"
                        mode="filing"
                        class="menulist-menupopup"
                        showRecent="true"
