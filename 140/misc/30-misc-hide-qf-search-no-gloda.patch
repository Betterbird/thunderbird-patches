# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Date 1763587262 -3600
# Parent  a2b38f90067c63caf464ad32089a66265a20cb37
Misc: Hide QF search button if gloda is disabled.

diff --git a/mail/base/content/quickFilterBar.js b/mail/base/content/quickFilterBar.js
--- a/mail/base/content/quickFilterBar.js
+++ b/mail/base/content/quickFilterBar.js
@@ -164,8 +164,18 @@ var quickFilterBar = {
       const matchAB = checkbox.checked ? true : null;
       this.filterer.filterValues.text.states.matchAB = matchAB;
       this.deferredUpdateSearch();
     });
+
+    if (!Services.prefs.getBoolPref(
+      "mailnews.database.global.indexer.enabled"
+    )) {
+      const qf = document.getElementById("qfb-qs-textbox");
+      if (qf) {
+        qf.shadowRoot.getElementById("search-button").style.display = "none";
+        qf.shadowRoot.getElementById("clear-button").style.insetInlineEnd = "0";
+      }
+    }
   },
 
   /**
    * Get all button groups with the roving-group class.
