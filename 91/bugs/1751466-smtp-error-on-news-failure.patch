# HG changeset patch
# User Betterbird <betterbird@betterbird.eu>
# Parent  a4c122858ebe9bb672b411e093e6342a53a1243a
Bug 1751466 - Don't try issuing SMTP error for news delivery.

diff --git a/mailnews/compose/src/MessageSend.jsm b/mailnews/compose/src/MessageSend.jsm
--- a/mailnews/compose/src/MessageSend.jsm
+++ b/mailnews/compose/src/MessageSend.jsm
@@ -593,17 +593,17 @@ MessageSend.prototype = {
             // Not the default string. A mailnews error occurred that does not
             // require the server name to be encoded. Just print the descriptive
             // string.
             errorMsg = this._composeBundle.GetStringFromName(errorName);
           } else if (url.errorMessage) {
             // url.errorMessage is an already localized message, usually
             // combined with the error message from SMTP server.
             errorMsg = url.errorMessage;
-          } else {
+          } else if (!isNewsDelivery) {
             errorMsg = this._composeBundle.GetStringFromName(
               "sendFailedUnexpected"
             );
             // nsIStringBundle.formatStringFromName doesn't work with %X.
             errorMsg.replace("%X", `0x${exitCode.toString(16)}`);
             errorMsg =
               "\n" +
               MsgUtils.formatStringWithSMTPHostName(
