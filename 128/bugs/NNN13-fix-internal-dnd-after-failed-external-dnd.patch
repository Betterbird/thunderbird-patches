# HG changeset patch
# User alta88@fixall.com
# Date 1715288900 -7200
# Parent  fa4af3a748156c37c0f00165e8702b5633b2fe4f
NNN13 - Fix internal dnd after failed external dnd:

Drag an unsuitable external file (image, PDF, etc.) onto a folder and release despite "no parking sign".
Next internal drag&drop (message to folder, folder to folder) will fail.

diff --git a/mail/base/content/about3Pane.js b/mail/base/content/about3Pane.js
--- a/mail/base/content/about3Pane.js
+++ b/mail/base/content/about3Pane.js
@@ -2944,9 +2944,8 @@ var folderPane = {
     const copyKey =
       AppConstants.platform == "macosx" ? event.altKey : event.ctrlKey;
 
     event.dataTransfer.dropEffect = "none";
-    event.preventDefault();
 
     const row = event.target.closest("li");
     this._timedExpand(row);
     if (!row) {
@@ -3108,8 +3107,9 @@ var folderPane = {
     } else {
       return;
     }
 
+    event.preventDefault();
     this._clearDropTarget();
     row.classList.add("drop-target");
   },
 
